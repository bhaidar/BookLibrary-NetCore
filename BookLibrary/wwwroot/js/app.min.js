var app=app||{};app.Book=Backbone.Model.extend({defaults:{coverImage:"images/placeholder.png",title:"No title",author:"Unknown",releaseDate:"Unknown",keywords:"None"},idAttribute:"_id"});var app=app||{};app.Library=Backbone.Collection.extend({model:app.Book,url:"/api/books"});var app=app||{};app.BookView=Backbone.View.extend({tagName:"div",className:"bookContainer",template:$("#bookTemplate").html(),events:{"click .delete":"deleteBook"},render:function(){var e=_.template(this.template);return this.$el.html(e(this.model.toJSON())),this},deleteBook:function(){this.model.destroy(),this.remove()}});var app=app||{};app.LibraryView=Backbone.View.extend({el:"#books",initialize:function(e){this.collection=new app.Library(e),this.collection.fetch({reset:!0}),this.render(),this.listenTo(this.collection,"add",this.renderBook),this.listenTo(this.collection,"reset",this.render)},events:{"click #add":"addBook"},render:function(){this.collection.each(function(e){this.renderBook(e)},this)},renderBook:function(e){var t=new app.BookView({model:e});this.$el.append(t.render().el)},addBook:function(e){e.preventDefault();var t={};$("#addBook div").children("input").each(function(e,o){""!=$(o).val()&&("keywords"===o.id?(t[o.id]=[],_.each($(o).val().split(" "),function(e){t[o.id].push({keyword:e})})):"releaseDate"===o.id?t[o.id]=$("#releaseDate").datepicker("getDate").getTime():t[o.id]=$(o).val()),$(o).val("")}),this.collection.create(t)}});var app=app||{};$(function(){$("#releaseDate").datepicker(),new app.LibraryView});
//# sourceMappingURL=app.min.js.map
