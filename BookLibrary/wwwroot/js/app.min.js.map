{"version":3,"sources":["wwwroot/js/models/book.js","wwwroot/js/collections/library.js","wwwroot/js/views/book.js","wwwroot/js/views/library.js","wwwroot/js/app.js"],"names":["app","Book","Backbone","Model","extend","defaults","coverImage","title","author","releaseDate","keywords","idAttribute","Library","Collection","model","url","BookView","View","tagName","className","template","$","html","events","click .delete","render","tmpl","_","this","$el","toJSON","deleteBook","destroy","remove","LibraryView","el","initialize","initialBooks","collection","fetch","reset","listenTo","renderBook","click #add","each","item","bookView","append","addBook","e","preventDefault","formData","children","i","val","id","split","keyword","push","datepicker","getTime","create"],"mappings":"CAEAA,IAAAA,SAEAC,KAAAC,SAAAC,MAAAC,QACAC,UACAC,WAAA,yBACAC,MAAA,WACAC,OAAA,UACAC,YAAA,UACAC,SAAA,QAGAC,YAAA,SCXAX,IAAAA,SAEAY,QAAAV,SAAAW,WAAAT,QACAU,MAAAd,IAAAC,KACAc,IAAA,gBCHAf,IAAAA,SAEAgB,SAAAd,SAAAe,KAAAb,QACAc,QAAA,MACAC,UAAA,gBACAC,SAAAC,EAAA,iBAAAC,OACAC,QACAC,gBAAA,cAGAC,OAAA,WACA,IAAAC,EAAAC,EAAAP,SAAAQ,KAAAR,UAEA,OADAQ,KAAAC,IAAAP,KAAAI,EAAAE,KAAAd,MAAAgB,WACAF,MAGAG,WAAA,WACAH,KAAAd,MAAAkB,UACAJ,KAAAK,aClBAjC,IAAAA,SAEAkC,YAAAhC,SAAAe,KAAAb,QACA+B,GAAA,SAEAC,WAAA,SAAAC,GACAT,KAAAU,WAAA,IAAAtC,IAAAY,QAAAyB,GACAT,KAAAU,WAAAC,OAAAC,OAAA,IACAZ,KAAAH,SAEAG,KAAAa,SAAAb,KAAAU,WAAA,MAAAV,KAAAc,YACAd,KAAAa,SAAAb,KAAAU,WAAA,QAAAV,KAAAH,SAGAF,QACAoB,aAAA,WAGAlB,OAAA,WACAG,KAAAU,WAAAM,KAAA,SAAAC,GACAjB,KAAAc,WAAAG,IACAjB,OAGAc,WAAA,SAAAG,GACA,IAAAC,EAAA,IAAA9C,IAAAgB,UACAF,MAAA+B,IAEAjB,KAAAC,IAAAkB,OAAAD,EAAArB,SAAAU,KAGAa,QAAA,SAAAC,GACAA,EAAAC,iBAEA,IAAAC,KAEA9B,EAAA,gBAAA+B,SAAA,SAAAR,KAAA,SAAAS,EAAAlB,GACA,IAAAd,EAAAc,GAAAmB,QACA,aAAAnB,EAAAoB,IACAJ,EAAAhB,EAAAoB,OACA5B,EAAAiB,KAAAvB,EAAAc,GAAAmB,MAAAE,MAAA,KAAA,SAAAC,GACAN,EAAAhB,EAAAoB,IAAAG,MAAAD,QAAAA,OAEA,gBAAAtB,EAAAoB,GACAJ,EAAAhB,EAAAoB,IAAAlC,EAAA,gBAAAsC,WAAA,WAAAC,UAEAT,EAAAhB,EAAAoB,IAAAlC,EAAAc,GAAAmB,OAGAjC,EAAAc,GAAAmB,IAAA,MAGA1B,KAAAU,WAAAuB,OAAAV,MCvDA,IAAAnD,IAAAA,QAEAqB,EAAA,WACAA,EAAA,gBAAAsC,aACA,IAAA3D,IAAAkC","file":"app.min.js","sourcesContent":["/* global Backbone */\r\n\r\nvar app = app || {};\r\n\r\napp.Book = Backbone.Model.extend({\r\n    defaults: {\r\n        coverImage: 'images/placeholder.png',\r\n        title: 'No title',\r\n        author: 'Unknown',\r\n        releaseDate: 'Unknown',\r\n        keywords: 'None'\r\n    },\r\n\r\n    idAttribute: '_id'\r\n});","/* global Backbone */\r\n\r\nvar app = app || {};\r\n\r\napp.Library = Backbone.Collection.extend({\r\n    model: app.Book,\r\n    url: '/api/books'\r\n});","/* global Backbone */\r\n/* global _ */\r\n\r\nvar app = app || {};\r\n\r\napp.BookView = Backbone.View.extend({\r\n    tagName: 'div',\r\n    className: 'bookContainer',\r\n    template: $('#bookTemplate').html(),\r\n    events: {\r\n        'click .delete': 'deleteBook'\r\n    },\r\n\r\n    render: function () {\r\n        var tmpl = _.template(this.template);\r\n        this.$el.html(tmpl(this.model.toJSON()));\r\n        return this;\r\n    },\r\n\r\n    deleteBook: function () {\r\n        this.model.destroy();\r\n        this.remove();\r\n    }\r\n});","/* global Backbone */\r\n/* global _ */\r\n\r\nvar app = app || {};\r\n\r\napp.LibraryView = Backbone.View.extend({\r\n    el: '#books',\r\n\r\n    initialize: function (initialBooks) {\r\n        this.collection = new app.Library(initialBooks);\r\n        this.collection.fetch({ reset: true });\r\n        this.render();\r\n\r\n        this.listenTo(this.collection, 'add', this.renderBook);\r\n        this.listenTo(this.collection, 'reset', this.render);\r\n    },\r\n\r\n    events: {\r\n        'click #add': 'addBook'\r\n    },\r\n\r\n    render: function () {\r\n        this.collection.each(function (item) {\r\n            this.renderBook(item);\r\n        }, this);\r\n    },\r\n\r\n    renderBook: function (item) {\r\n        var bookView = new app.BookView({\r\n            model: item\r\n        });\r\n        this.$el.append(bookView.render().el);\r\n    },\r\n\r\n    addBook: function (e) {\r\n        e.preventDefault();\r\n\r\n        var formData = {};\r\n\r\n        $('#addBook div').children('input').each(function (i, el) {\r\n            if ($(el).val() != '') {\r\n                if (el.id === 'keywords') {\r\n                    formData[el.id] = [];\r\n                    _.each($(el).val().split(' '), function (keyword) {\r\n                        formData[el.id].push({ 'keyword': keyword });\r\n                    });\r\n                } else if (el.id === 'releaseDate') {\r\n                    formData[el.id] = $('#releaseDate').datepicker('getDate').getTime();\r\n                } else {\r\n                    formData[el.id] = $(el).val();\r\n                }\r\n            }\r\n            $(el).val('');\r\n        });\r\n\r\n        this.collection.create(formData);\r\n    },\r\n});","var app = app || {};\r\n\r\n$(function () {\r\n    $('#releaseDate').datepicker();\r\n    new app.LibraryView();\r\n});"]}